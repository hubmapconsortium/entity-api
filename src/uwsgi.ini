[uwsgi]
# Need this plugin since uwsgi and uwsgi python plugin are installed with yum
# If uwsgi installed with pip, no need this
plugin = python36

# So uwsgi knows where to mount the app
chdir = /usr/src/app/src

# Application's callbale
module = wsgi:application

# Disable request logging due to it doesn't work with the Python logging level
# This also improves the performance
# We still want to log the 4xx and 5xx errors to the file
disable-logging = true
log-4xx = true
log-5xx = true
logto = /usr/src/app/log/uwsgi-entity-api.log

# Master with 4 worker process (based on CPU number)
master = true
processes = 4

# We can NOT enable the multithreading within uWSGI
# This would cause issues on member groups tokens parsing

# Use http socket for integration with nginx running on the same machine
socket = localhost:5000

# Enable socket cleanup when process stop
vacuum = true

# Ensure compatibility with init system
die-on-term = true
